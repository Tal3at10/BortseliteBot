# ๐ ุฏููู ุงูุญุตูู ุนูู ุฑูู ูุชููู ุฏุงุฆู

## ุงููุดููุฉ ุงูุญุงููุฉ:
- โ ุงูุชููู ุงูุญุงูู: **User Access Token** (ููุชูู ุจุนุฏ ุณุงุนุฉ ูุงุญุฏุฉ)
- โ ุงูุฑูู ุงูุญุงูู: **Test Number** (ููุชูู ุจุนุฏ 90 ููู)

## ุงูุญู:
- ๐ฏ ุงุณุชุฎุฏุงู **System User Access Token** (ุฏุงุฆู ุฃู 60 ููู)
- ๐ฏ ุงุณุชุฎุฏุงู **ุฑูู WhatsApp Business ุฏุงุฆู**

---

## ๐ ุงูุฎุทูุงุช ุงููุงููุฉ

### ุงูุฎุทูุฉ 1๏ธโฃ: ุฅูุดุงุก Business Portfolio (ูู ูุด ููุฌูุฏ)

1. ุฑูุญ ุนูู: https://business.facebook.com
2. ูู ูุด ุนูุฏู Business Portfolio:
   - ุงุถุบุท **Create Account**
   - ุงููุง ุงูุจูุงูุงุช (ุงุณู ุงูุดุฑูุฉุ ุงูุจุฑูุฏุ ุฅูุฎ)
   - ุงุถุบุท **Submit**

---

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅุถุงูุฉ ุฑูู WhatsApp ุฏุงุฆู

#### ุงูุทุฑููุฉ ุงูุฃููู: ุงุณุชุฎุฏุงู ุฑููู ุงูุญุงูู

1. ุฑูุญ ุนูู WhatsApp Manager: https://business.facebook.com/wa/manage/home/
2. ุงุถุบุท **Add Phone Number**
3. ุงุฎุชุงุฑ **Use your own phone number**
4. ุฃุฏุฎู ุฑูู ุงูููุจุงูู (ูุงุฒู ูููู ูุด ูุณุชุฎุฏู ูู WhatsApp ุนุงุฏู)
5. ุงุฎุชุงุฑ ุทุฑููุฉ ุงูุชุญูู:
   - **SMS** (ุงูุฃุณูู)
   - **Voice Call**
6. ุฃุฏุฎู ุงูููุฏ ุงููู ูููุตูู
7. โ ุชู! ุงูุฑูู ุฏูููุชู ุฏุงุฆู

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุดุฑุงุก ุฑูู ูู Meta (ูุฏููุน)

1. ูู WhatsApp Managerุ ุงุถุบุท **Buy a phone number**
2. ุงุฎุชุงุฑ ุงูุฏููุฉ ูุงูุฑูู
3. ุฃููู ุนูููุฉ ุงูุฏูุน
4. โ ุงูุฑูู ููููู ุฏุงุฆู ูููููู ูู

---

### ุงูุฎุทูุฉ 3๏ธโฃ: ุฅูุดุงุก System User (ููุชููู ุงูุฏุงุฆู)

1. ุฑูุญ ุนูู Business Settings: https://business.facebook.com/settings
2. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุงุฑ **Users > System Users**
3. ุงุถุบุท **Add** (ุฒุฑุงุฑ ุฃุฒุฑู ูู ุฃุนูู ุงููููู)
4. ุงููุง ุงูุจูุงูุงุช:
   - **System User Name**: `WhatsApp Bot System User`
   - **System User Role**: **Admin**
5. ุงุถุบุท **Create System User**

---

### ุงูุฎุทูุฉ 4๏ธโฃ: ุฅุนุทุงุก ุตูุงุญูุงุช ููู System User

1. ูู ูุงุฆูุฉ System Usersุ ุงุถุบุท ุนูู ุงูู User ุงููู ุนููุชู
2. ุงุถุบุท **Add Assets**
3. ุงุฎุชุงุฑ **Apps**
4. ุงุฎุชุงุฑ ุงูู App ุจุชุงุนู (CustomsBot ุฃู ุงุณู ุงูู App)
5. ูุนูู **Full Control** ุฃู **Manage App**
6. ุงุถุบุท **Save Changes**

---

### ุงูุฎุทูุฉ 5๏ธโฃ: ุชูููุฏ Access Token ุฏุงุฆู

1. ูู ุตูุญุฉ ุงูู System Userุ ุงุถุบุท **Generate New Token**
2. ุงุฎุชุงุฑ ุงูู **App** ุจุชุงุนู ูู ุงููุงุฆูุฉ
3. ูู **Permissions**ุ ุงุฎุชุงุฑ:
   - โ `whatsapp_business_messaging`
   - โ `whatsapp_business_management`
   - โ `business_management` (ุงุฎุชูุงุฑู)
4. ูู **Token Expiration**:
   - ุงุฎุชุงุฑ **60 days** (ุฃู **Never** ูู ูุชุงุญ)
5. ุงุถุบุท **Generate Token**
6. **โ๏ธ ููู ุฌุฏุงู:** ุงูุณุฎ ุงูุชููู ููุฑุงู! (ูุด ููุธูุฑ ุชุงูู)

**ุดูู ุงูุชููู:**
```
EAABsbCS1iHgBO7ZC8wZBxxx...ุทููู ุฌุฏุงู...xxxZDZD
```

---

### ุงูุฎุทูุฉ 6๏ธโฃ: ุงูุญุตูู ุนูู Phone Number ID ุงูุฏุงุฆู

1. ุฑูุญ ุนูู: https://developers.facebook.com/apps
2. ุงุฎุชุงุฑ ุงูู App ุจุชุงุนู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุงุฑ **WhatsApp > API Setup**
4. ูุชูุงูู ูุงุฆูุฉ ุจุงูุฃุฑูุงู ุงููุชุงุญุฉ
5. ุงูุฑูู ุงูุฏุงุฆู ุงููู ุถูุชู ููููู ููุฌูุฏ
6. ุงูุณุฎ ุงูู **Phone Number ID** (ุฑูู ุทููู ุชุญุช ุงูุฑูู)

**ูุซุงู:**
```
Phone Number: +966 50 123 4567
Phone Number ID: 123456789012345
```

---

### ุงูุฎุทูุฉ 7๏ธโฃ: ุชุญุฏูุซ ุงูู Configuration ูู ุงููุดุฑูุน

#### ุฃ) ุชุญุฏูุซ appsettings.json:

ุงูุชุญ ุงูููู: `CustomsBot/appsettings.json`

ุงุณุชุจุฏู ุงูููู:
```json
{
    "WhatsAppSettings": {
        "AccessToken": "EAABsbCS1iHgBO7ZC8wZBxxx...ุงูุชููู ุงูุฏุงุฆู ุงูุฌุฏูุฏ...xxxZDZD",
        "PhoneNumberId": "123456789012345",
        "VerifyToken": "my_secret_token_123"
    }
}
```

#### ุจ) ูู ูุชูุดุฑ ุนูู Railway:

1. ุฑูุญ ุนูู Railway Dashboard
2. ุงุฎุชุงุฑ ุงูู Project ุจุชุงุนู
3. ุฑูุญ ุนูู **Variables**
4. ุญุฏูุซ ุงูููู:
```
WhatsAppSettings__AccessToken=EAABsbCS1iHgBO7ZC8wZBxxx...ุงูุฌุฏูุฏ...xxxZDZD
WhatsAppSettings__PhoneNumberId=123456789012345
WhatsAppSettings__VerifyToken=my_secret_token_123
```

---

### ุงูุฎุทูุฉ 8๏ธโฃ: ุฅุนุงุฏุฉ ุฑุจุท ุงูู Webhook

ุจุนุฏ ุชุบููุฑ ุงูุฑููุ ูุงุฒู ุชุฑุจุท ุงูู webhook ุชุงูู:

1. ุฑูุญ ุนูู: https://developers.facebook.com/apps
2. ุงุฎุชุงุฑ ุงูู App ุจุชุงุนู
3. ุฑูุญ **WhatsApp > Configuration**
4. ูู ูุณู **Webhook**:
   - **Callback URL**: `https://your-app.railway.app/api/whatsapp/webhook`
   - **Verify Token**: `my_secret_token_123`
5. ุงุถุบุท **Verify and Save**

---

## โ ุงูุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ

### 1. ุงุฎุชุจุงุฑ ุงูุชููู:

ุงูุชุญ Terminal ูุงูุชุจ:
```bash
curl -X GET "https://graph.facebook.com/v21.0/YOUR_PHONE_NUMBER_ID?access_token=YOUR_NEW_TOKEN"
```

**ูู ุดุบุงู ุตุญุ ูุชุฑุฌุน:**
```json
{
  "verified_name": "ุงุณู ุดุฑูุชู",
  "display_phone_number": "+966...",
  "id": "123456789012345"
}
```

### 2. ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู:

ุงุจุนุช ุฑุณุงูุฉ ูู ููุจุงููู ููุฑูู ุงูุฌุฏูุฏุ ุงูููุฑูุถ ุงูุจูุช ูุฑุฏ ุนููู!

---

## ๐ ุชุฌุฏูุฏ ุงูุชููู (ูู ุงุฎุชุฑุช 60 ููู)

ูู ุงุฎุชุฑุช Token Expiration = 60 daysุ ูุงุฒู ุชุฌุฏุฏู ูู ุดูุฑูู:

### ุงูุทุฑููุฉ ุงูุฃูุชููุงุชูููุฉ (ูุณุชูุจูุงู):

ูููู ุชุนูู script ูุฌุฏุฏ ุงูุชููู ุชููุงุฆูุงู ุจุงุณุชุฎุฏุงู:
```
POST https://graph.facebook.com/v21.0/oauth/access_token
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ:

ูุฑุฑ ุงูุฎุทูุฉ 5๏ธโฃ ูู 60 ููู.

---

## ๐ ุงูุฏุนู

ูู ูุงุฌูุช ุฃู ูุดููุฉ:

1. **ูุดููุฉ ูู ุงูุชุญูู ูู ุงูุฑูู:**
   - ุชุฃูุฏ ุฅู ุงูุฑูู ูุด ูุณุชุฎุฏู ูู WhatsApp ุนุงุฏู
   - ุฌุฑุจ ุฑูู ุชุงูู

2. **ุงูุชููู ูุด ุดุบุงู:**
   - ุชุฃูุฏ ุฅูู ุงุฎุชุฑุช ุงูู Permissions ุงูุตุญูุญุฉ
   - ุชุฃูุฏ ุฅู ุงูู System User ุนูุฏู ุตูุงุญูุงุช ุนูู ุงูู App

3. **ุงูู Webhook ูุด ุดุบุงู:**
   - ุชุฃูุฏ ุฅู ุงูู Phone Number ID ุงูุฌุฏูุฏ ุตุญูุญ
   - ุชุฃูุฏ ุฅู ุงูู Webhook ูุฑุจูุท ุจุงูุฑูู ุงูุฌุฏูุฏ

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุจุนุฏ ุงูุฎุทูุงุช ุฏู:
- โ ุงูุชููู ููุดุชุบู 60 ููู (ุฃู ุฏุงุฆู)
- โ ุงูุฑูู ุฏุงุฆู ููุด ูููุชูู
- โ ุงูุจูุช ููุดุชุบู 24/7 ุจุฏูู ูุดุงูู

---

**ููุช ุงูุชูููุฐ ุงููุชููุน:** 15-20 ุฏูููุฉ

**ุฌุงูุฒุ ุงุจุฏุฃ ูู ุงูุฎุทูุฉ 1๏ธโฃ ููููู ูู ุงุญุชุฌุช ูุณุงุนุฏุฉ!** ๐
